local a=require("my.gears.debug")local tostring=tostring;local b=debug.traceback;local unpack=unpack or table.unpack;local xpcall=xpcall;local c={}function c._error_handler(d)a.print_error(b("Error during a protected call: "..tostring(d),2))end;function c._handle_result(e,...)if e then return...end end;local f;if not select(2,xpcall(function(g)return g end,error,true))then f=function(h,...)local i={...}return c._handle_result(xpcall(function()return h(unpack(i))end,c._error_handler))end else f=function(h,...)return c._handle_result(xpcall(h,c._error_handler,...))end end;function c.call(h,...)return f(h,...)end;local j={}function j:__call(...)return f(...)end;return setmetatable(c,j)