local awesome=awesome;local screen=screen;local a=require("my.gears.math").round;local b=require("my.gears.debug")local c={}local d={color0='#000000',color8='#465457',color1='#cb1578',color9='#dc5e86',color2='#8ecb15',color10='#9edc60',color3='#cb9a15',color11='#dcb65e',color4='#6f15cb',color12='#7e5edc',color5='#cb15c9',color13='#b75edc',color6='#15b4cb',color14='#5edcb4',color7='#888a85',color15='#ffffff',background='#0e0021',foreground='#bcbcbc'}function c.get_current_theme()local e={'background','foreground'}for f=0,15 do table.insert(e,"color"..f)end;local g={}for h,i in ipairs(e)do local j=awesome.xrdb_get_value("",i)if j then if j:find("rgb:")then j="#"..j:gsub("[a]?rgb:",""):gsub("/","")end else b.print_warning("my.beautiful: can't get colorscheme from xrdb for value '"..i.."' (using fallback).")j=d[i]end;g[i]=j end;return g end;local function k(l)return l and screen[l]end;function c.get_dpi(l)l=k(l)if l then return l.dpi end;if not c.dpi then if awesome and awesome.xrdb_get_value then c.dpi=tonumber(awesome.xrdb_get_value("","Xft.dpi"))end;if not c.dpi then if root then local m=25.4;local h,n=root.size()local h,o=root.size_mm()if o~=0 then c.dpi=a(n*m/o)end end end;if not c.dpi then c.dpi=96 end end;return c.dpi end;function c.set_dpi(p,l)l=k(l)if not l then c.dpi=p else l.dpi=p end end;function c.apply_dpi(q,l)return a(q/96*c.get_dpi(l))end;return c